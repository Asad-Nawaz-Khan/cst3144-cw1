<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Vue.js Depot</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js"></script>
    <script src="products.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

    <!-- Added CSS for flexbox -->
    <style>
        /* Body background color */
        /* Body background color */
body {
    background-image: url('images/gal.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
}
 /* Main product container */
 .product-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: space-around;
        }

        .product-item {
            background-color: #3a3a5a;
            color: #e0e0e0;
            width: 280px;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease;
        }

        .product-item:hover {
            transform: translateY(-5px);
            background-color: #46466d;
        }

        .product-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .product-item h2 {
            font-size: 1.4rem;
            color: #ffcc00;
        }

        .product-item p {
            margin: 5px 0;
        }

        .product-item button {
            margin-top: 10px;
            width: 100%;
            padding: 10px;
            background-color: #ffaa00;
            color: #1e1e2f;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
        }

        .product-item button:hover {
            background-color: #ff8800;
        }

        /* Checkout container styling */
        .checkout-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }


@media (max-width: 900px) {
    .product-item {
        flex: 1 1 calc(50% - 20px); /* Two items per row on medium screens */
    }
}

@media (max-width: 600px) {
    .product-item {
        flex: 1 1 100%; /* One item per row on small screens */
    }
}


/* Navigation bar styling */
.top-navigation {
    background-color: rgb(58, 58, 58);
    border: 1px solid blue;
    padding: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.nav-title {
    color: white;
    margin: 0;
    font-size: 24px;
}

.search-section {
    display: flex;
    align-items: center;
}

.search-input {
    padding: 5px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    margin-right: 10px;
}

.cart-button {
    background-color: #fff;
    color: #4CAF50;
    border: 2px solid #fff;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    display: flex;
    align-items: center;
}

.cart-button .fa-cart-plus {
    margin-left: 5px;
}

.cart-button:hover {
    background-color: #102382;
    color: white;
}

/* Flexbox container for product items */
.items-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
}

.item-box {
    flex: 1 1 calc(33.33% - 20px);
    background-color: #3a3a5a;
    color: #e0e0e0;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0.2);
    transition: transform 0.2s ease;
}

.item-box:hover {
    background-color: #46466d;
    transform: translateY(-5px);
}

.item-image {
    width: 100%;
    height: 300px;
    object-fit: cover;
}

.item-details {
    margin-top: 10px;
}

.item-details p {
    margin: 5px 0;
}

/* Product description */
.product-details {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.description-container {
    flex: 1;
    padding-bottom: 10px;
    position: relative;
    top: 20px;
}

.product-heading {
    margin-top: 0;
}

/* Checkout styling */
.checkout-area {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 20px;
    justify-content: center;
}

.checkout-item {
    width: 200px;
    background-color: #525252;
    border: 1px solid red;
    padding: 10px;
    border-radius: 8px;
    text-align: center;
}

.checkout-item:hover {
    background-color: rgb(32, 32, 32);
    color: wheat;
}

.checkout-item img {
    width: 100px;
    height: 100px;
    object-fit: cover;
    margin-bottom: 10px;
}

.checkout-item p {
    margin: 5px 0;
}

.quantity-controls {
    display: flex;
    align-items: center;
    gap: 5px;
    margin-top: 5px;
}

.control-button {
    background-color: #4CAF50;
    color: white;
    border: none;
    padding: 5px;
    cursor: pointer;
    font-size: 14px;
    border-radius: 3px;
}

.control-button:hover {
    background-color: red;
}

/* Body styling */
body {
    background-color: #1e1e2f;
    color: #e0e0e0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.5;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
}

/* Container styling */
.content-wrapper {
    max-width: 900px;
    width: 100%;
    background: #2d2d3f;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

/* Header for experiment.html */
.page-title {
    text-align: center;
    font-size: 2rem;
    color: #ffcc00;
    margin-bottom: 20px;
}

/* Navbar for experiment.html */
.nav-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #3b3b4f;
    padding: 10px 20px;
    border-radius: 8px;
    margin-bottom: 20px;
}

.nav-wrapper h2 {
    font-size: 1.6rem;
    color: #e0e0e0;
}

.search-input {
    padding: 5px 10px;
    border: 2px solid #ffcc00;
    border-radius: 5px;
    font-size: 2rem;
}

.nav-button {
    padding: 5px 15px;
    background-color: #ffcc00;
    color: #1e1e2f;
    border: none;
    border-radius: 5px;
    font-size: 1rem;
    cursor: pointer;
}

.nav-button:hover {
    background-color: #ffaa00;
}

/* Main product container */
.items-section {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: space-around;
}

.item {
    background-color: #3a3a5a;
    color: #e0e0e0;
    width: 280px;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    transition: transform 0.2s ease;
}

.item:hover {
    transform: translateY(-5px);
    background-color: #46466d;
}

.item img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 5px;
    margin-bottom: 10px;
}

.item-title {
    font-size: 1.4rem;
    color: #ffcc00;
}

.item-description {
    margin: 5px 0;
}

.add-to-cart-button {
    margin-top: 10px;
    width: 100%;
    padding: 10px;
    background-color: #ffaa00;
    color: #1e1e2f;
    border: none;
    border-radius: 5px;
    font-size: 1rem;
    cursor: pointer;
}

.add-to-cart-button:hover {
    background-color: #ff8800;
}

/* User form input styling */
.input-box {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border-radius: 5px;
    border: 1px solid #ffcc00;
    background-color: #2d2d3f;
    color: #e0e0e0;
}

.label-title {
    display: block;
    margin-top: 10px;
    font-weight: bold;
}

.submit-button {
    width: 100%;
    padding: 10px;
    background-color: #ffaa00;
    color: #1e1e2f;
    border: none;
    border-radius: 5px;
    font-size: 1.1rem;
    cursor: pointer;
    margin-top: 15px;
}

.submit-button:hover {
    background-color: #ff8800;
}

/* Responsive adjustments */
@media (max-width: 900px) {
    .item-box {
        flex: 1 1 calc(50% - 20px); /* 2 items per row on medium screens */
    }
}

@media (max-width: 600px) {
    .item-box {
        flex: 1 1 100%; /* 1 item per row on small screens */
    }
}

    </style>
</head>

<body>
    <div id="app">

        <nav>
            <h2>After School Activities</h2>
            <div class="search-bar">
                <input type="text" placeholder="Search activities" v-model="searchQuery">
                <button v-on:click="showCheckout" :disabled="cartItemCount === 0">
                    {{cartItemCount}}
                    <span class="fa-solid fa-cart-plus"></span> Checkout
                </button>
            </div>
        </nav>


        <header>
            <h1 v-text="sitename"></h1>
            <!-- <button v-on:click="showCheckout">
                {{cartItemCount}}
                <span class="fa-solid fa-cart-plus"></span>Checkout
            </button> -->
        </header>

        <main>
            <div v-if="showProduct">
                <!-- Flex container for products -->
                <div class="product-container">
                    <!-- Loop through products and display each in a flex container -->
                    <div v-for="product in sortedProducts" :key="product.id" class="product-item">
                        <!-- Flexbox for image and description next to each other -->
                        <div class="product-flex">
                            <figure class="product-image">
                                <img v-bind:src="product.image">
                            </figure>

                            <div class="product-description">
                                <h2 v-text="product.title"></h2>
                                <p v-html="product.description"></p>
                                <p>Price: {{product.price}}</p>
                                <p>Available Stock: {{product.availableInventory - cartCount(product.id)}}</p>
                                <div>
                                    <span v-for="n in product.rating">★</span>
                                    <span v-for="n in 5 - product.rating">☆</span>
                                </div>
                                <button class="addbutton" v-on:click="addToCart(product)"
                                    v-if="canAddToCart(product)">Add to Cart</button>
                                <button disabled="disabled" v-else>Add to Cart</button>
                                <span v-if="product.availableInventory === cartCount(product.id)">All out!</span>
                                <span v-else-if="product.availableInventory - cartCount(product.id) < 5">
                                    Only {{product.availableInventory - cartCount(product.id)}} left!
                                </span>
                                <span v-else>Buy now!</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div v-else>
                <h2>Checkout</h2>

                <!-- Display selected products in the cart -->
                <div v-if="cartItems.length > 0" class="checkout-container">
                    <div v-for="item in cartItems" :key="item.id" class="cart-item">
                        <img v-bind:src="item.image" alt="Product image">
                        <p><strong>{{ item.title }}</strong></p>
                        <p>Price: ${{ item.price }}</p>
                        <p>Quantity: {{ item.quantity }}</p>

                        <div class="quantity-control">
                            <button v-on:click="increaseQuantity(item)">+</button>
                            <span>{{ item.quantity }}</span>
                            <button v-on:click="decreaseQuantity(item)" :disabled="item.quantity === 1">-</button>
                        </div>

                        <button v-on:click="removeFromCart(item)">Remove</button>
                    </div>
                </div>
                <p><strong>Total: ${{ cartTotal }}</strong></p>

                <!-- user inputs data here -->
                <p>
                    <strong>First Name:</strong>
                    <input v-model.trim="order.firstName" />
                </p>
                <p>
                    <strong>Last Name:</strong>
                    <input v-model="order.lastName" />
                </p>
                <p><strong>Address:</strong> <input v-model="order.address"></p>
                <p><strong>City:</strong> <input v-model="order.city"></p>

                <p>
                    <strong>State:</strong>
                    <select v-model="order.state">
                        <option disabled value="">Select State</option>
                        <option v-for="(state, key) in states" v-bind:value="state">
                            {{ key }}
                        </option>
                    </select>
                </p>
                <p><strong>Zip/Postal Code:</strong> <input v-model.number="order.zip" type="number" /></p>

                <p>
                    <input type="checkbox" id="gift" v-model="order.gift" value="true"
                        v-bind:true-value="order.sendGift" v-bind:false-value="order.dontSendGift">
                    <label for="gift">Ship as Gift?</label>
                </p>
                <p>
                    <input type="radio" id="home" value="Home" v-model="order.method">
                    <label for="home">Home</label>
                </p>
                <p>
                    <input type="radio" id="business" value="Business" v-model="order.method">
                    <label for="business">Business</label>
                </p>

                <h2>Order Information</h2>
                <p>First Name: {{order.firstName}}</p>
                <p>Last Name: {{order.lastName}}</p>
                <p>Address: {{order.address}}</p>
                <p>City: {{order.city}}</p>
                <p>Zip: {{order.zip}}</p>
                <p>State: {{order.state}}</p>
                <p>Gift?: {{order.gift}}</p>
                <p>Method: {{order.method}}</p>
                <button v-on:click="submitForm">Place Order</button>
        </main>

    </div>



    </main>
    </div>

    <script type="text/javascript">
        let webstore = new Vue({
            el: '#app',
            data: {
                sitename: 'Vue.js Pet Depot',
                products: products,
                product: {
                    id: 1001,
                    title: "Cat Food, 25 lb Bag",
                    description: "A 25-pound bag of <em>irresistible</em>, organic goodness for your cat.",
                    price: 2000,
                    image: "images/download.jpg",
                    availableInventory: 10,
                    rating: 3,
                },
                order: {
                    firstName: '',
                    lastName: '',
                    address: '',
                    city: '',
                    zip: '',
                    state: '',
                    method: 'home',
                    sendGift: "Send as a gift",
                    dontSendGift: "Do not send as a gift"
                },
                states: {
                    AL: "Alabama",
                    AR: "Arizona",
                    CA: "California",
                    NV: "Nevada"
                },
                cart: [],
                showProduct: true,
            },

            methods: {
                addToCart(product) {
                    this.cart.push(product.id);
                },
                removeFromCart(item) {
                    const index = this.cart.findIndex(cartId => cartId === item.id);
                    if (index > -1) {
                        this.cart.splice(index, 1);
                    }
                    if(this.cart.length ===0 ){
                        this.showProduct = true;
                    } 

                    
                },
                showCheckout() {
                    if (this.cart.length > 0) {
                        this.showProduct = !this.showProduct;
                    } else {
                        alert("Please add a product to the cart before checking out.");
                    }
                },
                submitForm() {
                    alert("Order submitted");
                },
                canAddToCart(product) {
                    return product.availableInventory > this.cartCount(product.id);
                },
                cartCount(id) {
                    return this.cart.filter(cartId => cartId === id).length;
                }
            },

            computed: {
                cartItemCount() {
                    return this.cart.length || "";
                },
                itemsLeft() {
                    return this.product.availableInventory - this.cartItemCount;
                },
                sortedProducts() {
                    // Sort the products array by price
                    function compare(a, b) {
                        if (a.price > b.price) return 1;
                        if (a.price < b.price) return -1;
                        return 0;
                    }
                    return this.products.sort(compare);
                },
                cartItems() {
                    return this.products
                        .filter(product => this.cart.includes(product.id))
                        .map(product => {
                            return {
                                ...product,
                                quantity: this.cartCount(product.id)
                            };
                        });
                },
                cartTotal() {
                    return this.cartItems.reduce((total, item) => {
                        return total + item.price * item.quantity;
                    }, 0);
                }
            }

        });
    </script>
</body>

</html>